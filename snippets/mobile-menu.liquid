<div
  id="mobile-menu-list"
  class="z-20 py-5 inset-x-0 bg-white w-full border-b absolute top-full"
  x-show="$store.global.isMobileMenuVisible"
  @keydown.escape="$store.global.isMobileMenuVisible = false"
  x-trap.inert.noscroll="$store.global.isMobileMenuVisible"
  role="menu"
  aria-label="Mobile navigation"
>
  <div class="container">
    <ul class="flex flex-col">
      {% for link in linklists['main-menu'].links %}
        <li
          x-data="{hoverable:false}"
          class="border-b last:border-0" role="presentation"
        >
          <div class="flex items-center justify-between py-2">
            <a class="flex min-h-[44px] items-center" href="{{ link.url }}" role="menuitem">
              {% render 'component-title' html:'h2' title:link.title | escape %}
            </a>
            {% if link.links != blank %}
              <button
                @click.prevent="hoverable=!hoverable"
                class="flex items-center justify-center min-w-[44px] min-h-[44px] bg-stone-100 rounded-lg"
                :aria-expanded="hoverable.toString()"
                :aria-label="hoverable ? 'Collapse {{ link.title | escape }} menu' : 'Expand {{ link.title | escape }} menu'"
              >
                <span class="text-lg font-medium" x-text="hoverable ? '-' : '+'" aria-hidden="true"></span>
              </button>
            {% endif %}
          </div>
          {% if link.links != blank %}
            <div x-show="hoverable" class="space-y-5 mb-5">
              <div class="flex flex-col">
                {%- for child_link in link.links -%}
                  <a 
                    href="{{ child_link.url }}" 
                    class="font-normal text-foreground leading-8 block"
                  >
                    {{ child_link.title | escape }}
                  </a>
                {%- endfor -%}
              </div>
              <a 
                class="w-full h-14 my-5 rounded-xl px-6 text-stone-700 border border-stone-900/50 flex items-center justify-center hover:text-stone-100 hover:bg-stone-900 transition ease" 
                href="{{ link.url }}"
              >{{ link.title }}</a>
            </div>
          {%- endif -%}
        </li>
      {% endfor %}
    </ul>
  </div>
</div>
