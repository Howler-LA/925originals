const o="data-prodify";window.variantStrings.addToCart;const m=window.variantStrings.unavailable_with_option,q=window.variantStrings.soldout_with_option,s=window.variantStrings.unavailable,w=`[${o}-price-container]`,y=`[${o}-media-container]`,I=`[${o}-variants-json]`,S=`[${o}-option-container]`,c=`[${o}-product-form]`,_=`[${o}-quantity-increment]`,O=`[${o}-quantity-decrement]`,N=`[${o}-quantity-presentation]`,R=`[${o}-quantity-hidden-input]`;function T(){if(window.prodify.pickerType=="select"){window.prodify.options=Array.from(window.prodify.el.querySelectorAll("select"),e=>e.value);return}window.prodify.optionContainers=Array.from(window.prodify.el.querySelectorAll(S)),window.prodify.options=window.prodify.optionContainers.map(e=>Array.from(e.querySelectorAll("input")).find(n=>n.checked).value)}async function h(e){return await fetch(e).then(n=>n.text()).then(n=>new DOMParser().parseFromString(n,"text/html"))}function A(){const e=window.prodify.variantData.filter(i=>window.prodify.el.querySelector(":checked").value===i.option1),n=Array.from(window.prodify.el.querySelectorAll(S));n.forEach((i,t)=>{if(t===0)return;const r=Array.from(i.querySelectorAll('input[type="radio"], option')),a=n[t-1].querySelector(":checked").value,u=e.filter(d=>d.available&&d[`option${t}`]===a).map(d=>d[`option${t+1}`]),E=e.filter(d=>d[`option${t}`]===a).map(d=>d[`option${t+1}`]);V(r,u,E)})}function C(){!window.prodify.currentVariant||window.prodify.el.dataset.updateUrl==="false"||window.history.replaceState({},"",`${window.prodify.el.dataset.url}?variant=${window.prodify.currentVariant.id}`)}function p(e=!0,n,i=!0){const t=document.querySelector(c);if(!t)return;const r=t.querySelector('[name="add"]'),a=t.querySelector('[name="add"] > span');r&&(e?(r.setAttribute("disabled","disabled"),n&&(a.textContent=n)):(r.removeAttribute("disabled"),a.textContent=s),i&&(e?r.classList.add("disabled"):r.classList.remove("disabled")))}function L(){document.querySelectorAll(c).forEach(n=>{const i=n.querySelector('input[name="id"]');i.value=window.prodify.currentVariant.id})}function V(e,n,i){e.forEach(t=>{if(n.includes(t.getAttribute("value"))){if(window.prodify.pickerType=="select"){t.innerText=t.getAttribute("value");return}t.classList.remove("disabled")}else if(i.includes(t.getAttribute("value"))){if(window.prodify.pickerType=="select"){t.innerText=q.replace("[value]",t.getAttribute("value"));return}t.classList.add("disabled")}else{if(window.prodify.pickerType=="select"){t.innerText=m.replace("[value]",t.getAttribute("value"));return}t.classList.add("disabled")}})}function b(e){if(window.prodify.pickerType=="select"){const n=Array.from(e.querySelectorAll("option")),i=e.value;n.forEach(t=>{t.value===i?t.setAttribute("selected","selected"):t.removeAttribute("selected")})}}function f(e){const n=parseInt(window.prodify.quantityPresentationInput.value);e=="up"?window.prodify.quantityHiddenInput.value=window.prodify.quantityPresentationInput.value=n+1:window.prodify.quantityHiddenInput.value=window.prodify.quantityPresentationInput.value=Math.max(1,n-1)}function $(){h(`${window.prodify.el.dataset.url}?variant=${window.prodify.currentVariant.id}&section_id=${window.prodify.el.dataset.section}`).then(e=>{const n=e.querySelector(w),i=window.prodify.el.querySelector(w),t=e.querySelector(y),r=window.prodify.el.querySelector(y),a=e.querySelector(`${c} [name="add"]`),u=window.prodify.el.querySelector(`${c} [name="add"]`);n&&i&&i.replaceWith(n),t&&r&&r.replaceWith(t),a&&u&&u.replaceWith(a)})}function v(){const n=D().find(i=>i.options.every((t,r)=>window.prodify.options[r]===t));window.prodify.currentVariant=n}function g(e){T(),v(),p(!0,"",!1),A(),b(e.target),window.prodify.currentVariant?(C(),L(),$()):p(!0,s,!0)}function D(){return window.prodify.variantData=window.prodify.variantData||JSON.parse(window.prodify.el.querySelector(I).textContent),window.prodify.variantData}function B(){window.prodify.quantityIncrementButton=window.prodify.el.querySelector(_),window.prodify.quantityDecrementButton=window.prodify.el.querySelector(O),window.prodify.quantityPresentationInput=window.prodify.el.querySelector(N),window.prodify.quantityHiddenInput=window.prodify.el.querySelector(R),window.prodify.el.addEventListener("change",g),window.prodify.quantityIncrementButton&&window.prodify.quantityDecrementButton&&window.prodify.quantityPresentationInput&&(window.prodify.quantityIncrementButton.addEventListener("click",()=>{f("up")}),window.prodify.quantityDecrementButton.addEventListener("click",()=>{f("down")}))}const l=document.querySelector(`[${o}]`);if(!("prodify"in window)&&l){const e=l.dataset.prodify;window.prodify={el:l,pickerType:e},T(),v(),A(),window.prodify.currentVariant||p(!0,s,!0),B()}
